---
import Base from "../layouts/Base.astro";
---

<Base>
  <div class="flex flex-col h-screen">
    <div class="flex-none flex items-center p-3 gap-3 text-slate-300 bg-gradient-to-r from-blue-950 from-60% to-slate-950">
      <img
        src="/kal-logo.png"
        alt="KAL Logo"
        class="border border-slate-700 w-12 h-12 rounded-md block"
      />
      <h1
        class="font-mono-display font-semibold text-[26px] bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 via-pink-500 to-rose-400"
      >Playground</h1>
    </div>

    <div class="flex-1 flex flex-col p-3 bg-slate-900">
      <textarea
        id="source"
        class="flex-1 border border-slate-700 text-slate-200 text-[16px] font-mono focus:border-slate-600 outline-none w-full h-full p-3 resize-none rounded-md bg-slate-900"
        placeholder="(Enter your code here)"
      ></textarea>
      <div class="flex-none mt-3">
        <button
          type="button"
          id="execute-button"
          class="text-purple-50 bg-purple-500 hover:bg-purple-400 py-2 px-4 rounded-md"
        >Execute</button>
        <div
          id="executed-result"
          class="mt-3 p-3 border border-slate-700 h-20 rounded-md text-slate-200 font-mono"
        >(Result)</div>
      </div>
    </div>
  </div>
</Base>

<script is:inline>
const btn = document.getElementById("execute-button");
const srcDom = document.getElementById("source");
const destDom = document.getElementById("executed-result");
btn.addEventListener("click", () => {
  try {
    var src = srcDom.value;
    var executedResult = kal.execute(src);
    destDom.innerHTML = executedResult;
  } catch (e) {
    destDom.innerHTML = e.message;
  }
});
</script>
